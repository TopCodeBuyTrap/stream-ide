Stream-IDE: A IDE em Streamlit
https://github.com/TopCodeBuyTrap/stream-ide

INSTALL:
                INSTALA√á√ïES PEND√äNCIAS E M√ìDULOS DO PROJETO

# Atualiza o gerenciador de pacotes, setuptools e wheel essenciais para instala√ß√£o de pacotes:
python.exe -m pip install --upgrade pip
python -m pip install --upgrade setuptools wheel

# ---------------------------- Criar app para executavel em pc
pip install streamlit-desktop-app

name: streamlit-desktop-app
version: 0.3.3
summary: easily convert streamlit apps into standalone desktop applications.
home-page: https://github.com/ohtaman/streamlit-desktop-app
author: ohtaman
author-email: ohtamans@gmail.com

# ---------------------------- Editor de Codigos
pip install streamlit-code-editor    # instalei pq tem como controlar os reruns de teclas digitadas
Home-page: https://github.com/bouzidanas/streamlit-code-editor
Author: Anas Bouzid
Author-email: anasbouzid@gmail.com


# ---------------------------- Rodar
streamlit run APP_.py
streamlit run Main.py




# FALTA IMPLEMENTAR:

2. bot√£o para baixar arquivos
implementar uma fun√ß√£o que permita ao usu√°rio baixar qualquer arquivo criado ou usado na ide.
o usu√°rio poder√° escolher o local de destino no computador.

3. pr√©-instala√ß√£o de m√≥dulos ao criar um projeto
ao criar um novo projeto, a ide deve instalar automaticamente m√≥dulos ou bibliotecas que o projeto precisa.
isso garante que o projeto j√° esteja configurado e pronto para rodar sem ajustes manuais.

uma parte que eu apanhei muito, precisei at√© de trocar o editor de c√≥digo, porque n√£o estava acompanhando o tema que eu passava. quando eu fui olhar na fun√ß√£o,
estava errada, estava retornando quando eu entrava com o arquivo, eu coloquei uma fun√ß√£o para retornar o que que era o arquivo para para modificar para a
linguagem. s√≥ que a fun√ß√£o estava retornando essa linguagem em que a primeira letra mai√∫scula, em em t√≠tulo, t√≠tulo. e isso estava fodendo com o tema. a√≠
o tema n√£o reconhecia a linguagem e n√£o dava conta de de acompanhar. esse foi um problema, eu fiquei o dia inteiro para resolver e s√≥ fui descobrir depois
que eu instalei uns dois ou tr√™s editores. outra coisa tamb√©m que foi canseira foi de usar o terminal. ainda estou trabalhando nisso, mas √© muito dif√≠cil de
usar o terminal, fazer eh usar o o dos ou sei l√° o que que √© que t√° usando aqui do do windows. e outra coisa tamb√©m que foi dif√≠cil foi fazer o conectar o
preview do editor de c√≥digo com o python, que est√° instalado na venv

4. criar botao traduzir terminal

6. Implementar github e atualiza√ß√£o automatica


# para criar o executavel:
streamlit-desktop-app build APP_.py `
    --name Stream_IDE `
    --streamlit-options --theme.base=dark `
    --pyinstaller-options `
    --onedir --noconfirm `
    --icon icon.ico





# Importante colocar --collect-data certifi
Porque o requests depende do certifi para validar conex√µes HTTPS.




Abertura_TCBT.py ___________________________________________________________Configura√ß√£o Inicial da Stream-IDE
Script principal da p√°gina inicial que configura diret√≥rios absolutos, caminhos de projetos e backups para a Stream-IDE v0.0.1.

IMPORTES E M√ìDULOS
- import streamlit as st  # Framework web para criar interface interativa da aplica√ß√£o
- import os  # Manipula√ß√£o de caminhos e arquivos do sistema operacional
- from pathlib import Path  # Manipula√ß√£o moderna e segura de caminhos de arquivos
- from APP_SUB_Janela_Explorer import Janela_PESQUIZA_PASTAS_ARQUIVOS  # Componente para sele√ß√£o visual de pastas/arquivos
- from Banco_dados import esc_A_CONTROLE_ABSOLUTO, ler_A_CONTROLE_ABSOLUTO, esc_CUSTOMIZATION  # Fun√ß√µes de persist√™ncia no banco de dados local

def Janela_Lista_Arquivos(st, listar_tipo, caminho_inicial):
# Abre dialog interativo para sele√ß√£o de arquivos/pastas usando Janela_PESQUIZA_PASTAS_ARQUIVOS.
# Par√¢metros: st (Streamlit), listar_tipo ('pastas' ou 'arquivos'), caminho_inicial (Path inicial).
# Inicializa session_state para caminho_selecionado e dialog_aberto.
# Retorna caminho selecionado ou None. Fecha dialog com st.rerun() ao confirmar.

def verificar_config_absoluta():
# Verifica se configura√ß√£o absoluta A_CONTROLE_ABSOLUTO existe e tem dados.
# Usa ler_A_CONTROLE_ABSOLUTO() do banco, retorna True se configurado, False caso contr√°rio.
# Trata exce√ß√µes implicitamente retornando False.

def texto_sobre():
# Retorna string com texto pessoal do desenvolvedor Henrique sobre a Stream-IDE.
# Inclui cr√©ditos e descri√ß√£o do projeto.

def texto_reconhencimento():
# Retorna string com reconhecimentos a desenvolvedores e reposit√≥rios externos usados.
# Inclui links para streamlit-desktop-app e streamlit_ace.

def Abertura():
# Fun√ß√£o principal que monta interface de configura√ß√£o inicial em layout de colunas.
# Verifica configura√ß√£o existente com verificar_config_absoluta().
# Se n√£o configurado: mostra auto-detec√ß√£o de diret√≥rios, inputs para projetos/backup/ollama, credenciais GPT.
# Cria pastas necess√°rias (.mim_mids, BackupSTR). Salva com esc_A_CONTROLE_ABSOLUTO e esc_CUSTOMIZATION.
# Aplica CSS customizado estilo "gamer retr√¥" com fontes 8-bit e gradientes neon.
# Retorna True se configura√ß√£o salva com sucesso.


# N√£o h√° chamadas principais soltas fora das fun√ß√µes - o script √© executado como p√°gina Streamlit principal.

APP_.py ____________________________________________________________________Aplica√ß√£o Principal da Stream-IDE
Script principal da Stream-IDE que gerencia projetos recentes, interface com editor, terminal e sidebar funcional. Corrige ModuleNotFoundError em execut√°veis e controla fluxo de configura√ß√£o inicial.

IMPORTES E M√ìDULOS
- import sys  # Acesso a vari√°veis do sistema Python e detec√ß√£o de modo execut√°vel
- from pathlib import Path  # Manipula√ß√£o segura de caminhos de arquivos
- import streamlit as st  # Framework web para interface principal da IDE
- from datetime import datetime  # Manipula√ß√£o de datas para ordena√ß√£o de projetos
- from APP_Editores_Auxiliares.APP_Catalogo import conf_baix_catalogo  # Cat√°logo de arquivos baixados
- from APP_SUB_Customizar import Customization  # Interface de customiza√ß√£o visual
- from APP_SUB_Funcitons import contar_estrutura, Button_Nao_Fecha, data_sistema, limpar_CASH, carregar_imagem_segura  # Fun√ß√µes utilit√°rias gerais
- from APP_SUB_Janela_Explorer import listar_arquivos_e_pastas  # Listagem recursiva de arquivos/pastas
- from APP_Sidebar import Sidebar_Diretorios  # Componente sidebar para navega√ß√£o de arquivos
- from Banco_dados import ler_A_CONTROLE_PROJETOS, ler_B_ARQUIVOS_RECENTES, se_B_ARQUIVOS_RECENTES, esc_B_ARQUIVOS_RECENTES, Del_B_ARQUIVOS_RECENTES, ler_A_CONTROLE_ABSOLUTO, Del_CUSTOMIZATION, esc_A_CONTROLE_PROJETOS  # CRUD banco de dados local
- from APP_SUB_Controle_Driretorios import _DIRETORIO_EXECUTAVEL_, _DIRETORIO_PROJETOS_  # Leitura de caminhos absolutos configurados
- from APP_Htmls import Carregamento_BancoDados_Temas  # Carregamento de temas e customiza√ß√µes visuais
- from Abertura_TCBT import Abertura  # P√°gina de configura√ß√£o inicial absoluta
- from APP_Menus import Abrir_Menu, Cria_Projeto_pouppap  # Menus e cria√ß√£o de projetos
- from APP_Editor_Run_Preview import Editor_Simples  # Editor de c√≥digo com preview e run
- from APP_Terminal import Terminal  # Terminal integrado
- from APP_SUB_Backup import BAKCUP  # Sistema de backup autom√°tico
- from APP_Atualizador import checar_atualizacao  # Verificador de atualiza√ß√µes
- from Banco_Predefinitions import ultima_versao  # Vers√£o atual da aplica√ß√£o

DEPOIS EM ORDEM (na sequ√™ncia que aparecem no c√≥digo):
# Bloco de corre√ß√£o ModuleNotFoundError para execut√°veis
if getattr(sys, 'frozen', False):  # Detecta execu√ß√£o como PyInstaller execut√°vel
    app_root = Path(sys.executable).parent.absolute()  # Pasta do .exe
    sys.path.append(str(app_root / "_internal"))  # Adiciona pasta interna ao Python path
    sys.path.append(str(app_root))  # Adiciona pasta raiz
else:  # Execu√ß√£o normal como script Python
    app_root = Path(__file__).parent.absolute()
    sys.path.append(str(app_root))  # Adiciona pasta do script

def select_arquivo_recente(col2):
# Lista e seleciona projetos recentes com ordena√ß√£o m√∫ltipla (data, vers√£o, alfab√©tica).
# Carrega de ler_A_CONTROLE_PROJETOS(), ordena dados, permite sele√ß√£o via selectbox.
# Atualiza controle com esc_A_CONTROLE_PROJETOS() e limpa cache ao trocar projeto.
# Par√¢metros: col2 (coluna Streamlit). Retorna None.

def app():
# Fun√ß√£o principal da aplica√ß√£o IDE ap√≥s configura√ß√£o absoluta.
# Monta layout com menu superior, sidebar lateral, editor principal e terminal.
# Gerencia projetos recentes, backups autom√°ticos, customiza√ß√£o e navega√ß√£o de arquivos.
# Inicializa vari√°veis globais de arquivos selecionados e controla fluxo com containers nomeados.

if __name__ == "__main__":
# Ponto de entrada principal do script.
# Configura Streamlit (wide layout, √≠cone, sidebar colapsada).
# Verifica configura√ß√£o absoluta: se ok ‚Üí carrega temas e executa app(); sen√£o ‚Üí mostra Abertura().
# Usa st.rerun() ap√≥s configura√ß√£o para recarregar com novos dados.


global arquivo_selecionado_caminho, arquivo_selecionado_nome, arquivo_selecionado_conteudo  # Vari√°veis globais para estado do arquivo editado
st.set_page_config(page_title="Stream-IDE", layout="wide",page_icon='icon.ico',initial_sidebar_state='collapsed')  # Configura√ß√£o global da p√°gina
if 'config_absoluta_ok' not in st.session_state:  # Inicializa flag de configura√ß√£o na session
    st.session_state.config_absoluta_ok = False

APP_Atualizador.py _____________________________________________________________Sistema de Auto-Atualiza√ß√£o da Stream-IDE
Script respons√°vel por verificar vers√£o atual no GitHub e atualizar automaticamente a aplica√ß√£o, preservando certificados e arquivos cr√≠ticos.

IMPORTES E M√ìDULOS
- import sys  # Detec√ß√£o de execu√ß√£o em modo execut√°vel (PyInstaller)
- import os  # Opera√ß√µes b√°sicas do sistema de arquivos
- import shutil  # C√≥pia recursiva e remo√ß√£o de diret√≥rios
- import time  # Timestamp para cache busting em requests
- import zipfile  # Extra√ß√£o de arquivos ZIP do GitHub
- import requests  # Download de vers√£o e ZIP releases
- from pathlib import Path  # Manipula√ß√£o segura de caminhos
- import streamlit as st  # Interface de dialog para processo de update
- from Banco_Predefinitions import ultima_versao, salvar_versao, atualizar_info_versao  # Controle de vers√£o no banco local

def get_app_root():
# Detecta pasta raiz da aplica√ß√£o (execut√°vel ou script).
# Retorna Path da pasta pai do .exe (frozen) ou pasta pai do script.

def checar_atualizacao():
# Abre dialog Streamlit para verificar atualiza√ß√µes.
# Compara versao_local com LATEST_VERSION.txt do GitHub.
# Mostra bot√£o de update se vers√£o nova dispon√≠vel, sen√£o confirma atualizado.

def atualizar_tudo(nova_versao):
# Processo completo de atualiza√ß√£o autom√°tica da aplica√ß√£o.
# 1. Download ZIP do GitHub com 4 m√©todos fallback
# 2. Extrai em temp_update/stream-ide-main
# 3. Backup certifi/ antes da atualiza√ß√£o
# 4. Atualiza seletivamente _internal/ (preserva certifi)
# 5. Restaura certifi/ do backup
# 6. Remove .py antigos da raiz
# 7. Copia arquivos raiz (style.css)
# 8. Atualiza pasta .arquivos/
# 9. Limpa tempor√°rios e atualiza banco com salvar_versao()
# Finaliza com sys.exit(0) ap√≥s 5s.

def chek_atual_simples():
# Verifica√ß√£o silenciosa de vers√£o (sem dialog).
# Atualiza info no banco com atualizar_info_versao(), sem interface.

APP_Editor_Run_Preview.py ______________________________________________________Editor Multi-Aba com Execu√ß√£o
Editor de c√≥digo multi-abas com execu√ß√£o em tempo real (Streamlit/Flask/Django/Python), detec√ß√£o autom√°tica de m√≥dulos faltantes, preview e suporte a m√≠dia/bin√°rios.

IMPORTES E M√ìDULOS
- import subprocess  # Execu√ß√£o de processos externos (Streamlit/Flask/Django)
- from pathlib import Path  # Manipula√ß√£o segura de caminhos
- import streamlit as st  # Interface principal
- import threading  # Execu√ß√£o ass√≠ncrona de c√≥digo Python
- import queue  # Comunica√ß√£o thread ‚Üî main (input/output)
- import os, time, re, sys, ast  # Sistema, tempo, regex, sys path, an√°lise AST imports
- from APP_Editores_Auxiliares.APP_Catalogo import arquivo_ja_catalogado  # Verifica cataloga√ß√£o
- from APP_Editores_Auxiliares.APP_Editor_Codigo import editor_codigo_autosave  # Editor Ace com autosave
- from APP_Menus import Apagar_Arq  # Dele√ß√£o de arquivos
- from APP_SUB_Controle_Driretorios import VENVE_DO_PROJETO  # Retorna Python_exe, paths VENV
- from APP_SUB_Funcitons import Identificar_linguagem, Button_Nao_Fecha, Sinbolos, controlar_altura  # Utils gerais
- from APP_SUB_Janela_Explorer import Abrir_Arquivo_Select_Tabs  # Leitor de arquivos por aba
- from APP_Editores_Auxiliares.SUB_Run_servidores import *  # Detec√ß√£o/execu√ß√£o Streamlit/Flask/Django
- from APP_Editores_Auxiliares.SUB_Traduz_terminal import traduzir_saida  # Tradu√ß√£o erros

_Python_exe, _Root_path, _Venv_path, _Prompt_venv = VENVE_DO_PROJETO()  # Config VENV global

def scrl(val):
# Remove scroll da p√°gina principal quando toggle desabilitado.

def status_bar_pro(state, linguagem, cod, linha_atual=1, coluna_atual=1, arquivo_path=None, readonly=False):
# Barra de status com linhas, chars, bytes, modo (EDIT/READONLY), encoding e posi√ß√£o cursor.

def checar_modulos_no_venv_(codigo, _Python_exe):
# Detector AST simples - lista imports faltantes no VENV via pip list.

def checar_modulos_no_venv(codigo, nome_arquivo, caminho, _Python_exe):
# Detector mestre: separa m√≥dulos PIP vs locais (testa import real).
# Retorna {'pip': [...], 'local': [...]} para auto-instala√ß√£o/imports.

def Editor_Simples(Janela, Select, CAMINHHOS, THEMA_EDITOR, EDITOR_TAM_MENU, FONTE, colStop, ColunaRun, CorBACK):
# Editor multi-abas COMPLETO com execu√ß√£o, preview e gerenciamento.
# Suporte: Python (thread), Streamlit/Flask/Django (subprocess), m√≠dia/bin√°rios.
# Recursos: autosave, detec√ß√£o m√≥dulos faltantes (auto-instala), status bar, stop/kill portas.
# Par√¢metros: Janela (container), Select (selectbox abas), CAMINHHOS (lista paths).
# Estado session_state: Conteudo[], Diretorio[], output, thread_running, id_aba_ativa.
# Retorna: ([], [], "", "", "") se sem arquivos.

def run_code_thread(codigo, input_q, output_q, caminho_sectbox):  # Inner function
# Thread executora Python puro: custom input/stdout, sys.path+VENV, exec() seguro.
# Captura output via queue, trata exce√ß√µes, restaura sys.stdout.

def limpar_autosave_velho():  # Inner function
# Limpeza autom√°tica de autosave session_state >1h (evita memory leak).


midia_exts = {'.mp3','.wav','.ogg','.flac','.mp4','.avi','.mkv','.webm','.png','.jpg','.jpeg','.gif','.bmp','.webp','.tiff','.pdf','.zip','.rar','.7z','.exe','.dll'}  # Extens√µes m√≠dia/bin√°rios (visualiza√ß√£o especial)
msg_fim_cod = "üèÅ Fim do Codigo!"  # Mensagem final execu√ß√£o
Most_Logs = False  # Flag debug logs


PASTA > APP_Editores_Auxiliares:
    APP_Api_IAs.py _____________________________________________________________Assistente IA OpenRouter integrado
Interface de IA para an√°lise, gera√ß√£o, refatora√ß√£o e documenta√ß√£o de c√≥digo usando OpenRouter API com 10 a√ß√µes pr√©-configuradas.

IMPORTES E M√ìDULOS
- import re  # Limpeza de markdown (```) da resposta da IA
- import requests  # Chamada HTTP para OpenRouter API
- from APP_SUB_Controle_Driretorios import _DIRETORIO_EXECUTAVEL_  # Recupera chave API do diret√≥rio execut√°vel
- from APP_SUB_Funcitons import wrap_text, controlar_altura  # Utils de formata√ß√£o e redimensionamento

def IA_openrouter(st, codigo_completo_do_editor, saida_preview, linguagem):
# Interface completa de assist√™ncia IA com OpenRouter (modelo arcee-ai/trinity-large-preview:free).
# Par√¢metros: st (Streamlit), c√≥digo atual do editor, sa√≠da preview, linguagem detectada.
# Layout: coluna estreita (selectbox+input) | coluna larga (resposta IA).
# A√ß√µes: 10 op√ß√µes (gerar c√≥digo, completar, refatorar, explicar, bugs, otimizar, testes, docs, seguran√ßa, converter).
# Gera prompts contextuais espec√≠ficos por a√ß√£o + pedido customizado do usu√°rio.
# Chama API com autentica√ß√£o via _DIRETORIO_EXECUTAVEL_('chave_api'), exibe c√≥digo limpo via st.code().


    APP_Catalogo.py ____________________________________________________________Sistema de Cataloga√ß√£o IA de C√≥digo
M√≥dulo que gera documenta√ß√£o autom√°tica de c√≥digo com IA (OpenRouter), armazena em JSON e permite download/visualiza√ß√£o de cat√°logos de projetos.

IMPORTES E M√ìDULOS
- from APP_SUB_Funcitons import wrap_text, controlar_altura  # Formata√ß√£o texto e redimensionamento UI
- import os  # Cria√ß√£o de pastas e verifica√ß√£o arquivos
- import json  # Persist√™ncia cat√°logo em .virto_stream/.catalogos.json
- import requests  # Chamada API OpenRouter para gera√ß√£o documenta√ß√£o
- import streamlit as st  # Interface Streamlit
- from datetime import datetime  # Timestamp nos cat√°logos
- import pandas as pd  # Tabela visualiza√ß√£o cat√°logos
- import shutil  # C√≥pia backup cat√°logos

def catalogar_arquivo_ia(nome_arquivo, caminho, codigo_completo_do_editor, linguagem):
# Gera documenta√ß√£o IA formatada para arquivo espec√≠fico e salva em .virto_stream/.catalogos.json.
# Interface: input observa√ß√£o + bot√£o ‚Üí chama OpenRouter com prompt especializado ‚Üí exibe/salva.
# Prompt segue formato exato: BREVE DESCRI√á√ÉO, IMPORTES, FUN√á√ïES, CHAMADAS SOLTAS.
# Retorna documenta√ß√£o formatada com download Markdown.

def arquivo_ja_catalogado(caminho):
# Verifica se arquivo j√° possui cat√°logo em .catalogos.json.
# Retorna (True/False, dados_catalogo_ou_None).

def conf_baix_catalogo(st, caminho_completo, nome_pasta):
# Interface lista cat√°logos (DataFrame pandas) + download consolidado TXT de todo projeto.
# Gera documento completo com todos arquivos catalogados + metadados (data/linguagem).

def conf_baix_catalogo_bacup(st, caminho_completo, nome_pasta):
# Backup autom√°tico de cat√°logo completo em backup/[nome_pasta]/StreamProjet.txt.
# Copia .virto_stream/StreamProjet.txt para pasta backup do projeto.


PASTA_CATALOGO = ".virto_stream"  # Pasta de persist√™ncia JSON cat√°logos
CAMINHO_JSON = os.path.join(PASTA_CATALOGO, ".catalogos.json")  # Arquivo master JSON
PASTA_BACKUP = os.path.join("backup", nome_pasta)  # Destino backup TXT
nome_txt = f"StreamProjet.txt"  # Nome padr√£o arquivo consolidado

    APP_Editor_Codigo.py _______________________________________________________Editor Ace Avan√ßado com An√°lise
Editor de c√≥digo Ace com an√°lise AST em tempo real, detec√ß√£o de m√≥dulos faltantes, m√©tricas de qualidade, autosave militar e suporte multi-aba.

IMPORTES E M√ìDULOS
- from code_editor import code_editor  # Componente Ace Editor React para Streamlit
- import os, time, ast, re  # Sistema, tempo, an√°lise AST, regex para linting
- from pathlib import Path  # Manipula√ß√£o segura de caminhos
- import importlib.util  # Verifica√ß√£o m√≥dulos instalados sem import
- from typing import List, Dict, Any, Optional  # Tipagem annotations/markers
- from APP_SUB_Controle_Driretorios import _DIRETORIO_PROJETO_ATUAL_  # Pasta projeto atual

def _modulo_instalado(nome_modulo: str) -> bool:
# Verifica se m√≥dulo est√° instalado via importlib.util.find_spec() (sem executar c√≥digo).

def _parse_ast(codigo: str) -> Optional[ast.AST]:
# Parse AST seguro com tratamento SyntaxError.

def Anotations_Editor(codigo: str) -> List[Dict[str, Any]]:
# An√°lise est√°tica completa: TODOs, linhas longas, print/debug, eval/exec, globals, pass, except gen√©rico.
# AST: fun√ß√µes/classes sem docstring, imports faltantes com sugest√£o pip install.

def Marcadores_Editor(codigo: str) -> List[Dict[str, Any]]:
# Markers visuais Ace: linhas longas, pass vazio, escopo fun√ß√µes/classes, imports faltantes.

def calcular_qualidade(codigo: str) -> Dict[str, Any]:
# M√©tricas qualidade: score 0-100, erros/warnings/info, status (Excelente/Boa/Cr√≠tica).

def Botoes():
# Config bot√µes Ace: Copy, Update/Submit (RefreshCw).

def Atalhos():
# Keybindings VSCode: Save(F5), Execute(Ctrl-S), comentar, mover linhas, rerun.

def Info_ide():
# Info bar: stats, erros, warnings, mode, filename, linenr, encoding, modified(*).

def Component_props():
# Props React Ace: autocomplete live, snippets, gutter, focus, highlight linha.

def Completar():
# Snippets custom: st_page, minha_df.head(), os.getenv('API_KEY'), debug print.

def Menus():
# Menus contextuais: File(Save/Delete/Reload), Edit(Cut/Copy/Format), Run(Run/Debug).

def Opcoes_editor(font_size, thema, fonte):
# Config Ace: wrap, fontSize/family, lineNumbers, theme ace/theme/, tabSize=4.

def Estilo(cor):
# Estilo CSS background customizado.

def editor_codigo_autosave(st, aba_id, caminho_arquivo, conteudo_inicial, linguagem, thema_editor, font_size, fonte, altura, backgroud=None):
# Editor Ace principal com autosave 3-camadas (cache/session, disco+backup.bak, emerg√™ncia JSON).
# Anota√ß√µes/marcadores em tempo real, debounce 1.5s, keys √∫nicas militares por aba/arquivo.
# Retorna c√≥digo ATUALIZADO sempre.

def editor_codigo_autosave_(st, aba_id, caminho_arquivo, conteudo_inicial, linguagem, thema_editor, font_size, fonte, altura, backgroud=None):
# Vers√£o alternativa com debounce 2s e ghost_text.


    APP_Json.py ________________________________________________________________Explorer JSON Interativo
Ferramenta visual para an√°lise de JSON/API responses com tabela estrutura, c√≥digo Python gerado automaticamente e navega√ß√£o recursiva.

IMPORTES E M√ìDULOS
- import ast  # ast.literal_eval() para parse seguro de strings JSON-like
- from APP_SUB_Funcitons import controlar_altura  # Controle altura container responsivo

def Jsnon(st, saida_preview):
# Analisa sa√≠da preview (JSON string) e gera interface explorer completa.
# Layout: coluna estreita (altura) | coluna larga (tabela + c√≥digo + m√©tricas).
# Parse: ast.literal_eval() ‚Üí percorre recursivamente dict/list ‚Üí gera tabela chaves/tipo/valor.
# Gera c√≥digo Python pronto: vari√°veis, loops enumerate, extra√ß√µes data['chave'].
# Exibe: DataFrame estrutura, JSON raw, c√≥digo extra√ß√£o, m√©trica total chaves.
# Trata SyntaxError/ValueError silenciosamente (n√£o-JSON).

CHAMADAS E OUTRAS COISAS SOLTAS
linhas_tabela = []  # Tabela DataFrame: Chave, Tipo, Valor de toda estrutura
codigo_gerado = []  # C√≥digo Python pronto para extra√ß√£o (for i, data['chave'])

def montar_caminho(partes):  # Gera paths Python seguros: data['chave'][i]['subchave']
def percorrer(obj, partes=None, indent=0):  # Recurs√£o master: dict/list/primitivos ‚Üí tabela + c√≥digo


    APP_Preview.py _____________________________________________________________Preview Execu√ß√£o em Tempo Real
Visualizador de output de c√≥digo em tempo real com queue system, chat input interativo e suporte a m√∫ltiplas linguagens.

IMPORTES E M√ìDULOS
- import queue  # Fila para comunica√ß√£o thread ‚Üí preview (output n√£o-bloqueante)
- from APP_SUB_Funcitons import controlar_altura  # Controle altura container responsivo

def Previews(st, _, linguagem, msg_fim_cod):
# Preview execu√ß√£o com output live streaming via session_state.output_queue.
# Layout: coluna estreita (altura ajust√°vel) | coluna larga (st.code com wrap).
# Processa fila: concatena em _.output, detecta "PROGRAM_FINISHED" ‚Üí adiciona msg_fim_cod.
# Input interativo: st.chat_input() ‚Üí _.input_queue quando thread_running=True.
# Usa st.empty() para update suave + fallback st.code quando parado.

CHAMADAS E OUTRAS COISAS SOLTAS
output_placeholder = st.empty()  # Container din√¢mico para refresh output sem scroll jump


    SUB_Run_servidores.py ______________________________________________________Gerenciador de Servidores Web
Sistema de execu√ß√£o subprocess para Streamlit, Flask e Django com detec√ß√£o autom√°tica, parsing netstat Windows (cp850 BR) e controle PID/portas.

IMPORTES E M√ìDULOS
- from pathlib import Path  # Manipula√ß√£o paths arquivos
- import subprocess  # Execu√ß√£o n√£o-bloqueante streamlit/flask/django
- import re, os, sys  # Regex parsing netstat, sistema, stderr
- from APP_SUB_Controle_Driretorios import VENVE_DO_PROJETO  # Python_exe + paths VENV/projeto
- STARTUPINFO = subprocess.STARTF_USESHOWWINDOW  # Oculta janelas subprocess Windows
- CREATE_NO_WINDOW  # Flags Windows para execu√ß√£o oculta

def netstat_streamlit():
# Lista processos Streamlit (portas 850x) via netstat -ano com encoding cp850 BR.
# Retorna [(porta, pid, linha_completa)] filtrando LISTENING + 850*.

def is_streamlit_code(code):
# Detecta c√≥digo Streamlit: 'import streamlit', 'import st', 'st.'.

def run_streamlit_process(file_path):
# Executa "python -m streamlit run arquivo.py" com VENV, cwd=projeto, stdout pipe.
# Retorna subprocess.Popen oculto (sem janela).

def is_flask_code(code):
# Detecta Flask: from flask import, app=Flask(), @app.route, app.run().

def extract_flask_config(code):
# Regex app.run() ‚Üí extrai port/host/debug com defaults.
# Retorna {'port': int/None, 'host': str, 'debug': bool}.

def stop_flex(porta):
# netstat | findstr :PORTA ‚Üí extrai PIDs √∫nicos da porta.
# Retorna lista PIDs ou [] se n√£o encontrado.

def netstat_flex():
# Lista processos flex/node/python em LISTENING (netstat parsing).

def find_port_by_pid(pid):
# Busca porta pelo PID em netstat_flex().

def run_flex_process(file_path):
# Executa "python -m modulo" (stem do arquivo) com VENV/cwd oculto.

def is_django_code(code):
# Detecta Django: execute_from_command_line + runserver ou manage.py runserver.

def extract_django_config(code):
# Regex manage.py runserver HOST:PORT ‚Üí defaults 127.0.0.1:8000.

def stop_process_by_port(porta):
# Mesmo stop_flex() mas gen√©rico (qualquer porta/processo).

CHAMADAS E OUTRAS COISAS SOLTAS
STARTUPINFO = subprocess.STARTUPINFO()  # Config Windows oculta janelas
STARTUPINFO.dwFlags |= subprocess.STARTF_USESHOWWINDOW
STARTUPINFO.wShowWindow = subprocess.SW_HIDE  # Janela invis√≠vel
CREATE_FLAGS = subprocess.CREATE_NO_WINDOW  # Sem console popup

APP_Htmls.py ___________________________________________________________________Sistema de Temas CSS Din√¢mico
M√≥dulo master de customiza√ß√£o visual que carrega configura√ß√µes do banco e gera CSS completo para toda a Streamlit IDE com fontes Google, gradientes e posicionamento fixo.

IMPORTES E M√ìDULOS
- import json  # Parsing dados projeto estruturados
- from time import sleep  # N√£o usado diretamente
- from APP_SUB_Controle_Driretorios import _DIRETORIO_EXECUTAVEL_, _DIRETORIO_PROJETOS_, _DIRETORIO_PROJETO_ATUAL_  # Paths absolutos
- from APP_SUB_Funcitons import saudacao_por_hora_sistema, cor_semelhante  # Utils UI e cores
- from Banco_dados import ler_B_ARQUIVOS_RECENTES  # Metadados projeto atual
- import base64  # Imagens base64 para CSS background

def Carregamento_BancoDados_Temas(st):
# Fun√ß√£o master que retorna 15 vari√°veis de customiza√ß√£o do banco + CSS injetado + header din√¢mico.
# Carrega: NOME_CUSTOM, cores, fontes, tamanhos, bordas, imagens, temas editores/terminal/preview.
# Gera CSS massivo (~400 linhas) cobrindo: inputs, bot√µes, sidebar, tabs, preview, terminal, chat IA, catalogador.
# Features: gradientes com opacidade inversa, fontes Google (Fira Code, JetBrains Mono, etc), posicionamento fixo containers.
# Header TOP_CAB: sauda√ß√£o + stats projeto (pastas/arquivos/extens√µes/vers√µes/criado/modificado) via HTML estilizado.
# Retorna tupla: (IMAGEM_LOGO, NOME_CUSTOM, NOME_USUARIO, COR_CAMPO, COR_MENU, THEMA_EDITOR, EDITOR_TAM_MENU, THEMA_PREVIEW, PREVIEW_TAM_MENU, THEMA_TERMINAL, TERMINAL_TAM_MENU, TOP_CAB, FONTE_MENU, FONTE_CAMPO, FUNDO_EDTOR).

CHAMADAS E OUTRAS COISAS SOLTAS
@st.cache_data  # Cache leituras banco para performance
def ler_CUSTOMIZATION_cached():  # Wrapper otimizado ler_CUSTOMIZATION_TODOS()

def img_to_base64(img_path):  # Converte imagens locais ‚Üí data:image/png;base64 para CSS
def hex_to_rgba_inverso(hex_color: str, intensidade):  # RGBA com alpha inverso (1-intensidade/100)

LOGO_BASE64 = img_to_base64(IMAGEM_LOGO)  # Logo sidebar base64
BG_STYLE = f'background: linear-gradient(...) url(...)'  # Background principal com overlay imagem
WD_STYLE = f'background: {COR_OVERLAY2}'  # Widgets com opacidade
SD_STYLE = f'background-color: {THEMA_APP1} + imagem Logo_simbolo.png'  # Sidebar custom

page_bg = f"""<style> /* CSS MONSTRUOSO 400+ linhas */ """  # CSS master injetado

def resumo_dict_para_html():  # Parser robusto metadados projeto (ast.literal_eval/json.loads fallback)
TOP_CAB = f'<div class="footer">{resumo_dict_para_html()}</div>'  # Header info projeto

PASSR_COR = 'red'  # Cor hover bot√µes

APP_Menus.py ___________________________________________________________________M√≥dulos de menu e cria√ß√£o
Stream-IDE respons√°veis por customiza√ß√£o visual,
cria√ß√£o de arquivos e pastas, abertura e cria√ß√£o de projetos Python completos
com templates, ambientes virtuais e persist√™ncia em banco local.

IMPORTES E M√ìDULOS
import os # Manipula√ß√£o de arquivos e diret√≥rios do sistema
import sys # Integra√ß√£o com subprocess e ambiente Python
import subprocess # Execu√ß√£o de comandos externos (venv, pip) sem console no Windows
from pathlib import Path # Manipula√ß√£o segura de caminhos e cria√ß√£o de pastas
import streamlit as st # Interface gr√°fica com dialogs, popovers e controles

from Banco_dados import ler_CUSTOMIZATION, ler_cut, esc_CUSTOMIZATION, ATUAL_CUSTOMIZATION_nome
# CRUD de customiza√ß√µes visuais persistidas
from Banco_dados import esc_CONTROLE_ARQUIVOS, esc_A_CONTROLE_PROJETOS
# Persist√™ncia de arquivos abertos e projetos no banco local
from Banco_Predefinitions import listar_templates, salvar_template, carregar_template
# Gerenciamento de templates reutiliz√°veis de projetos
from APP_SUB_Controle_Driretorios import *DIRETORIO_EXECUTAVEL*, *DIRETORIO_PROJETOS*,
*DIRETORIO_PROJETO_ATUAL*

# Caminhos absolutos configurados do sistema e projetos
from APP_SUB_Janela_Explorer import Janela_PESQUIZA
# Interface visual para sele√ß√£o de arquivos e pastas

from APP_SUB_Funcitons import Criar_Arquivo_TEXTO, data_sistema, limpar_CASH, resumo_pasta,
Button_Nao_Fecha, Alerta
# Fun√ß√µes utilit√°rias de cria√ß√£o, cache, resumo e UI
DEPOIS EM ORDEM (na sequ√™ncia que aparecem no c√≥digo):
STARTUPINFO = subprocess.STARTUPINFO()
# Configura√ß√£o do subprocess para ocultar janela de console no Windows

CREATE_NO_WINDOW = subprocess.CREATE_NO_WINDOW
# Flag Windows para execu√ß√£o silenciosa de comandos externos
FONTES_TEXTO = [...]

# Lista de fontes monospace dispon√≠veis para menus e campos de texto

TEMAS_CLAROS = [...]

# Temas claros do Ace Editor (chrome, eclipse, dreamweaver, etc.)

TEMAS_ESCUROS = [...]

# Temas escuros do Ace Editor (dracula, monokai, solarized_dark, etc.)

TEMAS_MONACO = [...]

# Temas do Monaco Editor (vs-dark, vs-light, hc-black)

LANGUAGES = [...]

# Linguagens suportadas pelo Ace Editor

LANGUAGE_EXTENSIONS = {...}

# Mapeamento linguagem ‚Üí extens√£o de arquivo padr√£o

def Custom(st):

# Fun√ß√£o principal de customiza√ß√£o visual da Stream-IDE

# Abre dialog n√£o-dismiss√≠vel com preview em tempo real

# Carrega customiza√ß√µes existentes via ler_CUSTOMIZATION()

# Permite criar, editar e salvar m√∫ltiplos perfis visuais

# Configura temas, fontes, cores, tamanhos e logos personalizados

# Salva resultados em esc_CUSTOMIZATION()

def Cria_Arquivos(st):

# Dialog global para cria√ß√£o de arquivos e pastas no projeto atual

# Permite criar arquivo por linguagem, pasta simples ou pacote Python

# Usa chat_input para nome, normaliza com replace de espa√ßos

# Cria estrutura imediatamente e executa rerun ap√≥s sucesso

def Cria_Arq_loc(st, caminho):

# Dialog localizado para cria√ß√£o m√∫ltipla em uma pasta espec√≠fica

# Permite acumular a√ß√µes em session_state["acoes"]

# Cria√ß√£o em lote de arquivos, pastas e pacotes

# Retorna True se alguma a√ß√£o foi executada

def Abrir_Projeto(st):

# Dialog para abrir projetos ou arquivos existentes

# Para arquivos: l√™ conte√∫do e salva em esc_CONTROLE_ARQUIVOS

# Para diret√≥rios: gera resumo_pasta e salva em esc_A_CONTROLE_PROJETOS

# Atualiza estados, limpa cache e executa rerun

def Abrir_Menu(st):

# Menu principal da IDE exibido em popover

# A√ß√µes: Criar Projeto, Abrir Projeto, Criar Arquivos, Customiza√ß√£o

# Usa Button_Nao_Fecha para evitar fechamento autom√°tico

# Trata conflitos de cliques simult√¢neos

def Cria_Projeto(st):

# Dialog completo para cria√ß√£o de projeto Python

# Gerencia arquivos iniciais din√¢micos via session_state

# Suporte a templates salvos e carregados

# Cria estrutura do projeto, ambiente virtual e arquivos

# Exibe progresso e logs em tempo real

# Salva projeto criado em esc_A_CONTROLE_PROJETOS

def Cria_Projeto_pouppap(st):

# Vers√£o simplificada de Cria_Projeto para primeira execu√ß√£o da IDE

# Usada quando n√£o existem projetos cadastrados

# Caminho base definido automaticamente

def Apagar_Arq(st, nome, diretorio):

# Dialog de confirma√ß√£o para exclus√£o de arquivo

# Mostra caminho completo e exige confirma√ß√£o expl√≠cita

# Executa exclus√£o definitiva e limpa estados ap√≥s pequeno delay

CHAMADAS E OUTRAS COISAS SOLTAS
st.session_state.setdefault("criar_projeto", True)

# Controle de abertura do dialog de cria√ß√£o de projeto

st.session_state.arquivos_projeto = [{"nome": "main.py", "conteudo": "..."}]

# Arquivo inicial padr√£o para novos projetos

CREATE_NO_WINDOW = 0x08000000

# Constante Windows para subprocess sem console

STARTUPINFO = subprocess.STARTUPINFO()

# Inicializa√ß√£o global de configura√ß√£o de subprocess
progresso = st.progress(0)
# Barra visual de progresso durante cria√ß√£o de projeto
log_area = st.empty()
# √Årea din√¢mica para logs em tempo real da cria√ß√£o


APP_Sidebar.py _________________________________________________________________Navega√ß√£o de Arquivos da Stream-IDE
Componente sidebar que exibe estrutura recursiva de projetos + banco de arquivos em checkboxes naveg√°veis para sele√ß√£o de arquivos.

IMPORTES E M√ìDULOS
- import os # Verifica√ß√£o de diret√≥rios e manipula√ß√£o de caminhos
- from APP_Menus import Cria_Arq_loc # Cria√ß√£o de arquivos locais no projeto
- from APP_SUB_Funcitons import Identificar_linguagem, sincronizar_estrutura, Sinbolos # Identifica√ß√£o de linguagem, sincroniza√ß√£o e s√≠mbolos visuais
- from APP_SUB_Janela_Explorer import listar_arquivos_e_pastas, Open_Explorer # Listagem recursiva e abertura de explorer
- from Banco_dados import ler_CONTROLE_ARQUIVOS, Del_CONTROLE_ARQUIVOS, se_CONTROLE_ARQUIVOS # CRUD do banco de arquivos tempor√°rios
- import streamlit as st # Interface principal da sidebar

DEPOIS EM ORDEM (na sequ√™ncia que aparecem no c√≥digo):
def Sidebar_Diretorios(st, lista_projeto, caminho_completo, nome_pasta): # Fun√ß√£o principal da sidebar de navega√ß√£o
Inicializa session_state para expanders_abertos_sidebar (pastas expandidas) e file_status_sidebar.
Processa recursivamente estrutura de projeto com checkboxes para pastas (expans√≠veis) e arquivos.
Integra arquivos do banco (n√£o sincronizados com filesystem) com bot√£o de remo√ß√£o.
Retorna duas listas: Arquivo_Selecionado_Nomes (nomes vis√≠veis) e Arquivo_Selecionado_Completo (caminhos absolutos).

def processar_projeto(nome_item, caminho_item, nivel=0): # Fun√ß√£o recursiva interna para processar itens da √°rvore
Para diret√≥rios: checkbox expans√≠vel com emoji (üõ†Ô∏è para venv/.virtual), bot√£o criar arquivo e listagem recursiva de subitens.
Para arquivos: checkbox com s√≠mbolo visual (Sinbolos) para sele√ß√£o.
Retorna lista de itens abertos localmente [(nome, caminho, origem)].

CHAMADAS E OUTRAS COISAS SOLTAS
qt_col = 7 # Quantidade de colunas para exibi√ß√£o de checkboxes de arquivos selecionados
st.session_state.expanders_abertos_sidebar = set() # Estado global das pastas expandidas na sidebar
st.session_state.file_status_sidebar = {} # Estado dos status dos arquivos na sidebar
todos_abertos = [] # Lista acumulada de todos itens selecionados (projeto + banco)


APP_SUB_Backup.py ______________________________________________________________Sistema de Backup Autom√°tico da Stream-IDE
M√≥dulo de backup autom√°tico silencioso a cada X minutos com progresso visual, exclus√£o de pastas ignoradas (.venv, .idea) e persist√™ncia de hist√≥rico.

IMPORTES E M√ìDULOS
- import os # Listagem de diret√≥rios e verifica√ß√£o de arquivos/pastas
- import shutil # C√≥pia recursiva de √°rvores de diret√≥rios (shutil.copytree/copy2)
- import time # C√°lculo de intervalos de tempo para timer interno
- from pathlib import Path # Cria√ß√£o segura de pastas de backup di√°rias
- from datetime import datetime # Formata√ß√£o de timestamps para pastas (YYYY-MM-DD)
- from Banco_Predefinitions import ler_BACKUP_HORAS_ATUALIZOU, verifica_minutos, ATUAL_BACKUP, ler_BACKUP_QTDS_HORAS_ATUALIZOU, backups_feito # Controle de hist√≥rico e timers de backup
- from APP_Editores_Auxiliares.APP_Catalogo import conf_baix_catalogo_bacup # Backup do cat√°logo de arquivos baixados
- import streamlit as st # Barra de progresso e status visual do backup

DEPOIS EM ORDEM (na sequ√™ncia que aparecem no c√≥digo):
def Criar_pasta(nome_pasta): # Cria pasta com parents=True (recursivo)
Usa Path.mkdir(parents=True, exist_ok=True) para criar estrutura completa.
Silenciosa, n√£o gera exce√ß√µes.

def Apagar_Pasta(pasta): # Remove arquivo ou pasta recursivamente
Para arquivos: os.remove(). Para diret√≥rios: shutil.rmtree().
Try/except pass garante execu√ß√£o silenciosa mesmo com erros de permiss√£o.

def BAKCUP(st, minutos_atualizar, pasta_local, destino, ignores=None): # Backup autom√°tico principal com throttling
Sistema completo sem piscar tela: timer interno (st.session_state.backup_ultimo_check) evita checagens desnecess√°rias.
Ignora pastas sens√≠veis (.idea, .venv, .virto_stream, etc.) configur√°veis.
Fluxo: verifica_minutos() ‚Üí marca ATUAL_BACKUP() ‚Üí apaga/recria pasta dia ‚Üí copia com progresso ‚Üí atualiza contador total.
Previne duplicatas com st.session_state.backup_executando. Sempre libera estado no finally.

CHAMADAS E OUTRAS COISAS SOLTAS
ignores = ['.idea', '.venv', 'build', 'dist', '.virto_stream', '.gitignore'] # Lista padr√£o de pastas exclu√≠das do backup
st.session_state.backup_ultimo_check = 0 # Timestamp da √∫ltima checagem (evita loops)
st.session_state.backup_executando = False # Lock para prevenir backup simult√¢neo
pasta_dia = os.path.join(destino, agora.strftime("%Y-%m-%d")) # Pasta backup com data atual (2026-02-07)
progress_bar = st.progress(0) # Barra visual de progresso proporcional a itens_totais
status_text = st.empty() # Status din√¢mico "Copiando: nome (X/Y)" atualizado em tempo real


APP_SUB_Controle_Driretorios.py ________________________________________________Gerenciador de Caminhos Absolutos da Stream-IDE
Sistema centralizado de caminhos absolutos com cache_data que l√™ configura√ß√£o do banco e resolve diret√≥rios de instala√ß√£o, projetos e ambiente virtual.

IMPORTES E M√ìDULOS
- import sys # Acesso a informa√ß√µes do sistema Python
- import streamlit as st # Decorator @st.cache_data para performance dos caminhos
- from pathlib import Path # Manipula√ß√£o cross-platform de caminhos absolutos
- from Banco_dados import ler_A_CONTROLE_ABSOLUTO, ler_B_ARQUIVOS_RECENTES # Leitura de configura√ß√µes salvas

DEPOIS EM ORDEM (na sequ√™ncia que aparecem no c√≥digo):
@st.cache_data
def _DIRETORIO_EXECUTAVEL_(arquivo=''): # Caminho base da instala√ß√£o com subpastas espec√≠ficas
L√™ Pasta_Isntal_exec do banco via ler_A_CONTROLE_ABSOLUTO() (primeiro campo).
Cria .mim_mids se n√£o existir na pasta pai.
Retorna Path espec√≠fico baseado em arquivo: '.arquivos', 'mim_mids', 'backup', 'chave_api' ou pasta raiz.

@st.cache_data
def _DIRETORIO_PROJETOS_(): # Pasta central de todos os projetos configurada
Retorna Pasta_Projetos = ler_A_CONTROLE_ABSOLUTO() resolvido (segundo campo do banco). [linhadecodigo.com](http://www.linhadecodigo.com.br/artigo/1494/aprendendo-a-documentar-o-seu-codigo.aspx)
√önico ponto de acesso para diret√≥rio de projetos.

def _DIRETORIO_PROJETO_ATUAL_(): # Projeto atualmente em uso (√∫ltimo aberto)
Tenta ler_B_ARQUIVOS_RECENTES() (√∫ltimo projeto recente).
Fallback para _DIRETORIO_EXECUTAVEL_() se IndexError (nenhum projeto aberto).

@st.cache_data
def VENVE_DO_PROJETO(): # Informa√ß√µes completas do ambiente virtual atual
Construa caminho .virto_stream/Scripts/python.exe (Windows) do projeto atual.
Retorna tupla: (python_venv_exe, projeto_path, venv_path, prompt_PS_completo).

CHAMADAS E OUTRAS COISAS SOLTAS
Path(Pasta_Isntal_exec.parent, ".mim_mids").mkdir() # Cria pasta oculta de m√≠dias na inicializa√ß√£o
venv_win = projeto_path / ".virto_stream" / "Scripts" / "python.exe" # Conven√ß√£o nome venv (.virto_stream)
prompt = f"({venv.name}) PS {projeto_path}> " # Prompt PowerShell customizado com nome venv

APP_SUB_Funcitons.py ___________________________________________________________Utilit√°rios Gerais da Stream-IDE
M√≥dulo central de fun√ß√µes utilit√°rias para manipula√ß√£o de arquivos, sincroniza√ß√£o de projetos, UI components personalizados e subprocess silencioso.

IMPORTES E M√ìDULOS
- import json # Persist√™ncia da estrutura do projeto em Arvore_projeto.json
- import subprocess # Execu√ß√£o silenciosa de comandos Python (--version) sem console Windows
- import textwrap # Quebra inteligente de texto para exibi√ß√£o
- from pathlib import Path # Manipula√ß√£o cross-platform de caminhos
- from APP_SUB_Controle_Driretorios import _DIRETORIO_PROJETO_ATUAL_ # Caminho projeto ativo
- from datetime import datetime # Timestamps para estrutura e sauda√ß√£o
- from collections import defaultdict # Contagem de extens√µes de arquivos
- import streamlit as st # Componentes UI e cache clearing
- import streamlit.components.v1 as components # Linhas separadoras HTML customizadas
- import colorsys, re # Gera√ß√£o de cores semelhantes para temas
- from PIL import Image # Carregamento seguro de imagens
- import os # Verifica√ß√µes de filesystem e permiss√µes

DEPOIS EM ORDEM (na sequ√™ncia que aparecem no c√≥digo):
STARTUPINFO = subprocess.STARTUPINFO() # Configura√ß√£o global para ocultar console Windows
CREATE_FLAGS = subprocess.CREATE_NO_WINDOW

def data_sistema(): # Timestamp formatado do sistema atual
Retorna "%Y-%m-%d %H:%M:%S" para logs e controle de projetos.

def Alerta(st, msg): # Dialog de alerta modal simples
@st.dialog("Alerta") exibe st.warning(msg) em modal.

def Criar_Arquivo_TEXTO(caminho, titulo, conteudo, ext): # Cria arquivo texto vazio
Escreve conte√∫do em caminho\\titulo+ext com UTF-8. Retorna caminho completo.

def contar_estrutura(caminho_base): # An√°lise completa recursiva do projeto
Exclui envs (.venv, .virto_stream) e pastas sens√≠veis (.git, .idea).
Conta pastas/arquivos por extens√£o, detecta Pythons com --version, timestamps cria√ß√£o/modifica√ß√£o.
Retorna dict: pastas, arquivos, extensao, datas, versoes.

def limpar_CASH(): # Limpa todos caches Streamlit
st.cache_data.clear() + st.cache_resource.clear().

def sincronizar_estrutura(caminho_arquivo=None): # Sincroniza JSON da √°rvore do projeto
Varre filesystem ‚Üí salva Arvore_projeto.json em .virto_stream.
Se caminho_arquivo: verifica se existe no JSON. Retorna True/False ou estrutura completa.

def Button_Nao_Fecha(nome_aberto, nome_fechado, key): # Bot√£o toggle sem fechar container
Estado persistente em session_state[key_state]. Muda primary/secondary dinamicamente.
Retorna True se aberto. Suporta fechar_outras lista opcional.

def Identificar_linguagem(arquivo): # Mapeia extens√£o ‚Üí linguagem Ace Editor
EXT_MAP completo (.py‚Üípython, .js‚ÜíjavaScript, .png‚Üíimagem, etc.). Default "Desconhecido".

def Sinbolos(arquivo): # Emoji por extens√£o para UI
ICONES_EXT rico (.pyüêç, .js‚ö°, .pngüñºÔ∏è, .pdfüìï, etc.). Default üì¶.

CHAMADAS E OUTRAS COISAS SOLTAS
def gerar_nome_unico(pasta_base, nome_desejado): # Evita colis√µes de nome incremental
Projeto ‚Üí Projeto_2 ‚Üí Projeto_3 at√© dispon√≠vel.

def resumo_pasta(caminho_pasta): # Resumo r√°pido n√≠vel raiz (1 itera√ß√£o)
Conta subpastas/arquivos/extensions apenas na raiz, exclui envs/sens√≠veis.

def chec_se_arq_do_projeto(Arq_Selec_Diretorios): # Filtra arquivos do projeto atual
Usa sincronizar_estrutura() para validar. Retorna nomes com √≠cones e caminhos relativos.

def controlar_altura(st, chave, altura_inicial=100): # Bot√µes resize vertical
‚Üë/‚Üì para ajustar altura din√¢mica em session_state. Limites configur√°veis.

carregar_imagem_segura(caminho_relativo): # Carrega PIL com valida√ß√µes
Verifica exist√™ncia/permiss√µes, fallback graceful com erros detalhados.


APP_SUB_Janela_Explorer.py _____________________________________________________Navegador Visual de Arquivos da Stream-IDE
M√≥dulo completo de interface explorer com √°rvore expans√≠vel, busca, cria√ß√£o de pastas e detec√ß√£o de tipos de m√≠dia para sele√ß√£o de arquivos/pastas.

IMPORTES E M√ìDULOS
- import hashlib # Gera√ß√£o de IDs seguros para keys de widgets (safe_id)
- import os # Listagem de diret√≥rios e verifica√ß√µes de filesystem
- from pathlib import Path # Manipula√ß√£o cross-platform de caminhos
- import requests # Download de imagens para cria√ß√£o de pastas de cat√°logo
- from PIL import Image # Processamento de imagens baixadas
- from io import BytesIO # Buffer para imagens baixadas via requests
- import streamlit as st # Interface explorer com session_state e containers

DEPOIS EM ORDEM (na sequ√™ncia que aparecem no c√≥digo):
def safe_id(texto): # Gera MD5 hash para keys √∫nicas de widgets
Converte qualquer string em ID hex seguro para Streamlit.

def listar_apenas_pastas(caminho): # Lista apenas diret√≥rios (n√£o recursivo)
Retorna lista [(nome_pasta, caminho_completo)] apenas do n√≠vel atual.

def listar_arquivos_e_pastas(caminho): # Lista arquivos E pastas do n√≠vel atual
Retorna lista completa [(nome_item, caminho_completo)] sem recurs√£o.

def baixar_imagem_e_criar_pasta(raiz, url_imagem, titulo_pasta, texto1, nome1): # Cria cat√°logo com imagem baixada
Baixa imagem via requests ‚Üí PIL ‚Üí salva como imagem_capa_principal.png.
Cria arquivos texto (nome1.txt + Para Site.txt opcional) na pasta criada.

def Abrir_Arquivo_Select_Tabs_(st, caminho): # Detecta tipo de arquivo com preview
Tipo IMAGEM: retorna bytes PIL (.png/.jpg/.gif).
Tipo VIDEO/AUDIO: retorna caminho string (.mp4/.mp3).
Tipo TEXTO: l√™ UTF-8 com chmod 0o666 para permiss√µes. Graceful errors.

def Janela_PESQUIZA(st, DIRETORIO): # Explorer completo com busca e navega√ß√£o
Navega√ß√£o: ‚Üë voltar_pasta(), üîç ir_para_caminho(), √°rvore checkboxes expans√≠veis.
Session_state: diretorio_atual, ultimo_caminho, expanders_abertos, arquivos_por_pasta.
Retorna (caminho_selecionado, "üìÅ DIRET√ìRIO" ou "üìÑ ARQUIVO").

def Janela_PESQUIZA_PASTAS_ARQUIVOS(st, LISTAR_OQUE, DIRETO): # Explorer configur√°vel
Vers√£o avan√ßada com ‚ûï criar_nova_pasta, modo 'pastas' ou 'arquivos+pastas'.
safe_id() para keys, processar_item() recursivo com controle de expans√£o.

def listar_pythons_windows(): # Detecta Pythons instalados no Windows
Varre AppData/Local/Programs/Python ‚Üí ordena por vers√£o decrescente.
Retorna dict {f"Python X.Y": "caminho/python.exe"}.

CHAMADAS E OUTRAS COISAS SOLTAS
st.session_state.setdefault('diretorio_atual', DIRETORIO) # Estado persistente da navega√ß√£o
st.container(height=450) # Container rol√°vel fixo para lista de arquivos
safe_id(caminho_item) # Garante keys √∫nicas para checkboxes recursivos
on_pasta_change(pasta_id, caminho) # Expans√£o/colapso com session_state
LISTAR_OQUE.lower() in ('pasta', 'pastas') # Modo filtro apenas pastas


APP_Terminal.py ________________________________________________________________Terminal Multi-Aba Integrado da Stream-IDE
Terminal completo com abas, integra√ß√£o bidirecional banco de dados pip/modulos, execu√ß√£o subprocess silenciosa no venv .virto_stream e controles por aba.

IMPORTES E M√ìDULOS
- import sys # Acesso ao sistema Python
- import streamlit as st # Interface multi-aba com @st.fragment(run_every=0.1) performance
- import subprocess # Execu√ß√£o de comandos no venv com STARTUPINFO oculta√ß√£o console Windows
- import threading, queue # Leitura ass√≠ncrona stdout em thread daemon
- import re # Sanitiza√ß√£o de nomes para keys (safe_key)
- import psutil # kill_process_tree recursivo para parar processos filhos
- from pathlib import Path # Manipula√ß√£o de caminhos do projeto
- from Banco_Dados_sudo_pip import * # init_db_modulos(), listar_modulos(), carregar_comando_modulo()
- from APP_SUB_Controle_Driretorios import _DIRETORIO_PROJETO_ATUAL_, VENVE_DO_PROJETO # Caminhos venv/projeto
- from APP_SUB_Funcitons import controlar_altura # Resize din√¢mico da altura do terminal

DEPOIS EM ORDEM (na sequ√™ncia que aparecem no c√≥digo):
STARTUPINFO = subprocess.STARTUPINFO() # Configura√ß√£o global oculta√ß√£o console Windows
CREATE_FLAGS = subprocess.CREATE_NO_WINDOW

_PYTHON_EXE, _ROOT_PATH, _VENV_PATH, _PROMPT = VENVE_DO_PROJETO() # Python venv, pasta projeto, prompt PS

def normalize_command(cmd): # Converte comandos shell ‚Üí lista Python pura para venv
pip/python/streamlit ‚Üí [_PYTHON_EXE, -m, pip/python/streamlit, args...].
Outros (flask/uvicorn/npm/git) ‚Üí executa direto do PATH venv.

def start_command(aba, cmd): # Inicia comando com reader_thread ass√≠ncrono
Popen com cwd=_ROOT_PATH, stdout PIPE unbuffered, encoding UTF-8.
Thread daemon l√™ stdout ‚Üí queue. Estado: running=True, pid, cmd, queue nova.

@st.fragment(run_every=0.1)
def terminal_fragment(aba, altura): # Renderiza√ß√£o 10Hz com queue polling
L√™ queue assincronamente, acumula em state.buffer. Detecta fim (None) ‚Üí "CONCLUIDO".
st.code(buffer, language="powershell") com altura din√¢mica.

def RenderTerminalAba(input_mode, altura, aba, aba_index): # UI completa por aba
Modo "Digitar": chat_input + toggle "üíæ Salva" ‚Üí aprende pip install em banco.
Modo "Escolher": 5 selectbox (Instalar/Desinstalar/Upgrade/Diversos/Deletar) + EXECUTAR.
Bot√µes PARAR/LIMPAR/PARAR TUDO com kill_process_tree(psutil).

def Terminal(): # Fun√ß√£o principal multi-aba
controlar_altura(200-600px) + bot√£o "Nova aba". Radio "Digitar/Escolher".
st.tabs() renderiza RenderTerminalAba por aba com keys √∫nicas por √≠ndice.

CHAMADAS E OUTRAS COISAS SOLTAS
st.session_state.terminal_abas[aba] = {"buffer": _PROMPT, "queue": Queue(), ...} # Estado isolado por aba
kill_process_tree(pid) # Mata processo + filhos recursivos (psutil)
st.fragment(run_every=0.1) # Atualiza√ß√£o 10Hz para responsividade sem lag
safe_key(name) = re.sub(r"\W", "_", name) # Keys Streamlit seguras
colunas  # 5 selectbox + bot√£o EXECUTAR layout uniforme [linhadecodigo.com](http://www.linhadecodigo.com.br/artigo/1494/aprendendo-a-documentar-o-seu-codigo.aspx)


Banco_Dados_sudo_pip.py ________________________________________________________Banco de Comandos Pip/Modulos da Stream-IDE
Banco SQLite dedicado ao terminal IDE com m√≥dulos pr√©-carregados (Streamlit, NumPy, Pandas) e aprendizado autom√°tico de comandos pip install digitados.

IMPORTES E M√ìDULOS
- import streamlit as st # @st.cache_data para init_db_modulos()
- import sqlite3 # Banco SQLite independente "Banco_Dados_sudo_pip.db"

DEPOIS EM ORDEM (na sequ√™ncia que aparecem no c√≥digo):
def get_conn(): # Conex√£o SQLite reutiliz√°vel com check_same_thread=False
Retorna sqlite3.connect() thread-safe para m√∫ltiplas abas terminal.

@st.cache_data
def init_db_modulos(): # Inicializa√ß√£o com cache_data (executa 1x)
Cria tabelas tabelas_modulos (nome, install/uninstall/upgrade_cmd, tipo) e comandos_diversos (nome, comando).
Chave prim√°ria nome. Timestamp data_cadastro autom√°tico.

def salvar_modulo(nome, install, uninstall, upgrade, tipo='principal'): # Salva/atualiza m√≥dulo 3x1
INSERT OR REPLACE com 3 comandos (install/uninstall/upgrade) + tipo ('principal'/'usuario').

def listar_modulos(): # Lista todos m√≥dulos para selectbox terminal
SELECT nome,tipo ORDER BY nome ‚Üí [{"nome": "...", "tipo": "..."}].

def carregar_comando_modulo(nome_modulo, acao): # Retorna comando espec√≠fico por a√ß√£o
SELECT {acao}_cmd WHERE nome=? ‚Üí install/uninstall/upgrade.

def carregar_modulos_padrao(): # 20+ m√≥dulos pr√©-carregados (N√ÉO executa no import)
CORE: pip/setuptools/wheel. CIENT√çFICO: numpy/pandas/scipy/matplotlib/plotly.
STREAMLIT: streamlit-web/desktop/option-menu/aggrid/extras. UTIL: requests/rich.

def salvar_comando_diverso(nome, comando): # Tabela paralela para comandos npm/git/etc
INSERT OR REPLACE comandos_diversos (nome, comando).

def listar_diversos(): # Lista comandos diversos para selectbox
SELECT nome ORDER BY nome da tabela comandos_diversos.

def carregar_diverso(nome): # Comando espec√≠fico diversos
SELECT comando WHERE nome=?.

CHAMADAS E OUTRAS COISAS SOLTAS
init_db_modulos() # Executado no import ‚Üí garante tabelas
carregar_modulos_padrao() # Executado no import ‚Üí popula 20+ m√≥dulos essenciais
tabelas_modulos # Principal: pip install/uninstall/upgrade por m√≥dulo
comandos_diversos # Secund√°ria: comandos npm/git/pytest salvos manualmente
INSERT OR REPLACE # Upsert garante atualiza√ß√£o sem duplicatas
check_same_thread=False # Suporte multi-thread/aba terminal simult√¢nea


Banco_dados.py _________________________________________________________________Banco Central Operacional da Stream-IDE
Banco SQLite "Base_Dados.db" com 5 tabelas CRUD para controle global, projetos, arquivos recentes, arquivos abertos e personaliza√ß√£o completa da interface.

## IMPORTES E M√ìDULOS
- import os # Verifica√ß√µes filesystem
- import sqlite3 # Banco thread-safe check_same_thread=False
- import time # Retry OperationalError em deletes
- import streamlit as st # @st.cache_data em leituras cr√≠ticas
- streamlit (import duplicado)

## TABELAS (init_db() @st.cache_data)
**A_CONTROLE_ABSOLUTO** (PRIMARY KEY DIRETORIO_PROGRAMA)
```
DIRETORIO_PROGRAMA, DIRETORIO_PROJETOS, DIRETORIOS_BACKUP
DIRETORIO_OLLAMA, VERSAO_OLLAMA, CHAVE_GPT, LOGUIN_GPT
```
Configura√ß√µes globais: instala√ß√£o, projetos, backup, Ollama, credenciais GPT.

**A_CONTROLE_PROJETOS**
```
DIRETORIO_TRABALHANDO, VERSION, DATA, DIRETORIOS, ARQUIVOS, OBS
```
Hist√≥rico projetos: caminho, vers√£o, data cria√ß√£o, contagens estrutura, observa√ß√µes.

**B_ARQUIVOS_RECENTES** (estado atual - 1 registro ativo)
```
DIRETORIO_TRABALHANDO, OBS (JSON estrutura projeto)
```
**Projeto atualmente em uso** - sempre substitui registro anterior.

**CONTROLE_ARQUIVOS**
```
NOME_ARQUIVO, CAMINHO_DIRETO, CONTEUDO_DO_ARQUIVO, EXTENTION
```
Cache arquivos abertos: nome, caminho absoluto, conte√∫do completo, extens√£o.

**CUSTOMIZATION** (PRIMARY KEY NOME_CUSTOM, OBS='ATIVO')
```
NOME_CUSTOM, NOME_USUARIO, CAMINHO_DOWNLOAD, IMAGEM_LOGO
THEMA_EDITOR/PREVIEW/TERMINAL/APP1/APP2, tamanhos menus
FONTE_MENU/CAMPO + tamanhos/cores, BORDA, RADIAL, DECORA, OPC1-3, OBS
```
**Personaliza√ß√£o completa UI** - 1 perfil ativo marcado OBS='ATIVO'

## CHAMADAS EXTERNAS (APP_SUB_Controle_Diretorios.py)
```
from Banco_dados import ler_A_CONTROLE_ABSOLUTO, ler_B_ARQUIVOS_RECENTES
```
- **ler_A_CONTROLE_ABSOLUTO()** ‚Üí DIRETORIO_PROGRAMA (instala√ß√£o)
- **ler_A_CONTROLE_ABSOLUTO()** ‚Üí DIRETORIO_PROJETOS [linhadecodigo.com](http://www.linhadecodigo.com.br/artigo/1494/aprendendo-a-documentar-o-seu-codigo.aspx)
- **ler_B_ARQUIVOS_RECENTES()** ‚Üí PROJETO_ATUAL

## PADR√ïES ARQUITETURA
**INSERT OR REPLACE** ‚Üí Upsert sem chaves artificiais (simples e robusto)
**@st.cache_data** ‚Üí ler_A_CONTROLE_ABSOLUTO(), init_db() performance Streamlit
**Retry 3x time.sleep(0.1)** ‚Üí OperationalError deletes (concorr√™ncia segura)
**get_conn() check_same_thread=False** ‚Üí Multi-aba terminal segura

## FLUXO CR√çTICO PROJETO ATUAL
```
1. ler_B_ARQUIVOS_RECENTES()[0][0] ‚Üí projeto atual OU vazio
2. esc_B_ARQUIVOS_RECENTES(novo_projeto, json_estrutura) ‚Üí substitui
3. _DIRETORIO_PROJETO_ATUAL_() ‚Üí l√™ B_ARQUIVOS_RECENTES() com fallback
```

**CUSTOM_ATIVO**: ler_CUSTOMIZATION_TODOS() ‚Üí dict completo OBS='ATIVO'

**init_db()** executado no import ‚Üí banco sempre pronto na primeira execu√ß√£o.


Banco_Predefinitions.py ________________________________________________________Banco Central de Configura√ß√µes da Stream-IDE
Banco SQLite "Base_Dados_PreDefinidos.db" com templates, layouts, vers√µes, hist√≥rico backup e controle temporal com cache_data para performance Streamlit.

## IMPORTES E M√ìDULOS
- import json # Serializa√ß√£o/deserializa√ß√£o templates e configs JSON
- import sqlite3 # Banco SQLite thread-safe com check_same_thread=False
- import streamlit as st # @st.cache_data para init_db() e ultima_versao()
- from datetime import datetime, timedelta # Controle temporal backup (verifica_minutos)

## FUN√á√ïES BANCO PRINCIPAL
**@st.cache_data def init_db():** Inicializa 4 tabelas com cache (1x por sess√£o)
- **templates**: id, nome UNIQUE, arquivos JSON (estrutura projetos)
- **config_layout**: containers_order JSON, layout INT, height_mode, col_weights JSON
- **versoes**: id, nome UNIQUE, data_instalacao, info_extra
- **BACKUP**: DATA PRIMARY KEY, HORAS_INICIO/ATUALIZOU TIME, contadores

**def get_conn():** Conex√£o reutiliz√°vel thread-safe para multi-aba

## TEMPLATES (CRUD Completo)
- **salvar_template(nome, arquivos)**: INSERT OR REPLACE json.dumps(arquivos)
- **listar_templates()**: SELECT nome ‚Üí lista strings
- **carregar_template(nome)**: SELECT arquivos ‚Üí json.loads()

## CONFIG LAYOUT (Estado UI)
- **salvar_config_atual(...)**: √öLTIMA config sempre (INSERT OR REPLACE)
- **carregar_config_atual()**: SELECT * DESC LIMIT 1 com json.loads() + valida√ß√£o
  Retorna dict: containers_order, layout, height_mode, col_weights

## VERS√ïES (Hist√≥rico Atualiza√ß√µes)
- **salvar_versao(nome, info_extra)**: INSERT OR REPLACE
- **listar_versoes()**: SELECT nome ORDER BY id ASC
- **@st.cache_data def ultima_versao()**: SELECT nome DESC LIMIT 1
- **versao_nova_atualizada()**: Retorna tupla raw da √∫ltima

## SISTEMA BACKUP (Temporal Inteligente)
**DATA = %Y-%m-%d | HORAS = %H:%M** (hoje 2026-02-07 20:15)

- **verifica_minutos(hora, minutos)**: True se passaram X minutos desde hora
- **ler_BACKUP_HORAS_ATUALIZOU()**: √öltima hora hoje OU esc() + 2h atr√°s
- **ler_BACKUP_QTDS_HORAS_ATUALIZOU()**: Contador atualiza√ß√µes hoje
- **ATUAL_BACKUP(COLUNA, CONTEUDO, CONTEUDO2)**: UPDATE din√¢mico DATA=hoje
- **backups_feito()**: String formatada "Horas: X, Atualizou: Y, Qtde: Z"
- **esc_BACKUP(HORAS_ATUALIZOU)**: INSERT hoje OU pass (IntegrityError)

## CHAMADAS EXTERNAS (do APP_Backup)
```
from Banco_Predefinitions import (
    ler_BACKUP_HORAS_ATUALIZOU, verifica_minutos, ATUAL_BACKUP,
    ler_BACKUP_QTDS_HORAS_ATUALIZOU, backups_feito
)
```
**init_db()** executado no import ‚Üí banco sempre pronto [blog.deeplink](https://blog.deeplink.kr/a-complete-guide-to-integrating-streamlit-with-databases-building-a-crud-app-with-sqlite/)

**FLUXO BACKUP**: verifica_minutos() ‚Üí ATUAL_BACKUP("HORAS_ATUALIZOU", hora_atual, +1) ‚Üí copia arquivos
